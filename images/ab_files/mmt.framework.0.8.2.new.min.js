var MMT_CONSTANTS={LIST_VIEW_WRAPPER:"list_view_info",LIST_VIEW_ID:"list_view_info_id",DROPDOWN_VIEW_WRAPPER:"dropdown_view_info",DROPDOWN_VIEW_ID:"dropdown_view_info_id",SCROLL_VIEW_WRAPPER:"scroll_view_info",SCROLL_VIEW_ID:"scroll_view_info_id",CAROUSEL_VIEW_WRAPPER:"carousel_view_info",CAROUSEL_VIEW_ID:"carousel_view_info_id",AJAX_VIEW_LOADER:"mt_loader",AJAX_VIEW_GET_API:"get_api_call",DATA:"data",BLOCK:"block",NONE:"none",LOGGER_LEVEL:{DEBUG:0,INFO:1,ERROR:2,FATAL:3}};function TemplatesProvider(e){this.templateMap=e,this.getTemplateFor=function(e){var t=e.screen;t&&""!==t||(t="default");var r=this.templateMap[t],i=r.url;if(i)return this.getTemplate(i,r);MMT.log.fatal("Template "+t+" is not defined in Templates JS File")},this.getScreenModelCallStartListener=function(e){var t=this.templateMap[e];if(t&&t.screenModelCallStart)return t.screenModelCallStart},this.getScreenModelCallCompleteListener=function(e){var t=this.templateMap[e];if(t&&t.screenModelCallComplete)return t.screenModelCallComplete},this.getScreenModelCallErrorListener=function(e){var t=this.templateMap[e];if(t&&t.screenModelCallError)return t.screenModelCallError},this.getTemplateForInterstitial=function(e){e&&""!==e||(e="default");var t=this.templateMap[e];if(!t)return this.fetchDefaultInterstitial(e);var r=t.interstitialUrl,i="";if(!r)return MMT.log.error("Interstitial Template "+e+" not defined"),this.fetchDefaultInterstitial(e);var n=MMT.templateCache.get(r);if(n)i=n;else{$.ajax({url:r,async:!1,success:function(e){MMT.templateCache.put(r,e),i=e},error:function(e){MMT.log.error("Error while fetching Interstitial Template for URL:: "+r+" :: Error :: "+e)}})}return document.getElementsByTagName("page-view")[0].innerHTML=i,!0},this.getTemplate=function(e,t){var r=MMT.templateCache.get(e),i=$.Deferred();if(r)i.resolve(r,t);else{$.ajax({url:e,async:!0,success:function(r){MMT.templateCache.put(e,r),i.resolve(r,t)},error:function(t){MMT.log.error("Error while fetching template for URL:: "+e+" :: Error :: "+t)}})}return i.promise()},this.fetchDefaultInterstitial=function(e){return"default"!=e&&this.getTemplateForInterstitial("default")}}function AbstractRenderer(){this.constructor===AbstractRenderer&&new Error("Abstract Renderer is an Abstract Class")}function AggregateViewEventBinder(){this.bindEvents=function(e,t,r){t.events;handleViewEvents(t,e,r,"AggregateViewEventBinder"),handleMTClick(t,e,r)}}function AggregateViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){var n=(t=i.viewModel).data;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o&&o instanceof Object&&o.hasOwnProperty("view")){var s=router.getViewRendererFactory().getRenderer(o.view);try{s.render(getFirstElementWithClass(e,a),o,a)}catch(e){MMT.log.error("render in AggregateViewRenderer failed"),MMT.log.error(e.name+" for :: "+a+" with message "+e.message)}}}replaceMtIDsWithViewModelData(t.data,e),this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=i.oldViewModel,a=t.data;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];if(s&&s instanceof Object&&s.hasOwnProperty("view")){var l=router.getViewRendererFactory().getRenderer(s.view);try{l.rerender(getFirstElementWithClass(e,o),s,o)}catch(e){MMT.log.error("render in AggregateViewRenderer failed"),MMT.log.error(e.name+" with message "+e.message)}}}updateMtIDsWithViewModelData(t.data,e,n),this.postRenderActions(e,t,r)}}}function AjaxViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(executeMultiAjaxView((t=i.viewModel).data,e,r,!0),this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(executeMultiAjaxView((t=i.viewModel).data,e,r,!1),this.postRenderActions(e,t,r))}}function AjaxViewEventBinder(){this.bindEvents=function(e,t,r){}}function CarouselViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){var n=(t=i.viewModel)&&t.data&&t.data.list,a=t&&t.data&&t.data.meta;a=JSON.stringify(a),e.setAttribute("mt-carousel-meta",a);var o=document.createElement("img");o.setAttribute("class","img-responsive"),o.setAttribute("mt-view","image_view"),e.setAttribute("mt-hash-osel","carousel_"+(new Date).getTime());for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];if(l&&l instanceof Object&&l.hasOwnProperty("view")){var d=router.getViewRendererFactory().getRenderer(l.view),c=o.cloneNode(!0);c.style.display="",e.appendChild(c),d.render(c,l,s)}}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){this.render(e,t,r)}}function CarouselViewEventBinder(){this.bindEvents=function(e,t,r){router.getRenderedViewModelMap()[r]=deepCopyObject(t);var i=t.events;for(var n in i)if(n.startsWith("mt_event_")){var a=i[n];n=n.split("mt_event_")[1];try{var o=$("div[mt-hash-osel='"+e.getAttribute("mt-hash-osel")+"']");"carousel"==a.type&&(bindExecuteCarouselEvent(a,o,e),handleMTClick(t,e,r))}catch(e){MMT.log.error("CarouselEvent failed to bind events"),MMT.log.error(e.name+" with message "+e.message)}}}}function CheckboxViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=getCheckboxElementFromCheckBoxView(e);n&&(t.data[t.data.key]="true"===t.data.value.toString(),n.setAttribute("id",t.data.key),n.checked=t.data[t.data.key]);var a=getLabelElementFromCheckBoxView(e);a&&a.setAttribute("for",t.data.key),replaceMtIDsWithViewModelData(t.data,e),this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;i.oldViewModel;var n=getCheckboxElementFromCheckBoxView(e);n&&(t.data[t.data.key]="true"===t.data.value.toString(),n.setAttribute("id",t.data.key),n.checked=t.data[t.data.key]);var a=getLabelElementFromCheckBoxView(e);a&&a.setAttribute("for",t.data.key),replaceMtIDsWithViewModelData(t.data,e),this.postRenderActions(e,t,r)}}}function CheckboxViewEventBinder(){this.bindEvents=function(e,t,r){t.events;var i=e.getElementsByTagName("input");if(i&&i.length>0){var n=i[0];n.onclick=function(){setTimeout(function(){router.handleCheckBoxClick(n,t)},0)}}}}function ComputedViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(replaceMtIDsWithViewModelData((t=i.viewModel).data,e),this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;i.oldViewModel;replaceMtIDsWithViewModelData(t.data,e),this.postRenderActions(e,t,r)}}}function ComputedViewEventBinder(){this.bindEvents=function(e,t,r){}}function DropdownItemViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(replaceMtIDsWithViewModelData((t=i.viewModel).data,e),this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=i.oldViewModel;updateMtIDsWithViewModelData(t.data,e,n),this.postRenderActions(e,t,r)}}}function DropdownItemViewEventBinder(){this.bindEvents=function(e,t,r){e.onclick=function(){t.data.selected=!0,console.log("DropDown Item View :: "+JSON.stringify(t)),router.viewModelChangeListener.publish(r)}}}function DropdownViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){var n=(t=i.viewModel).data;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];if(o&&o instanceof Object&&o.hasOwnProperty("view")){if("LIST_VIEW"===o.view){var s=o.data;router.viewModelChangeListener.subscribe(a,function(){for(var e=s,i=0;i<e.length;i++){var n=e[i].data;!0===n.selected&&(t.data.selectedValue=n.option_name,router.rerender(r))}})}var l=router.getViewRendererFactory().getRenderer(o.view);try{l.render(getFirstElementWithClass(e,a),o,a)}catch(e){MMT.log.error("render in DropdownViewRenderer failed"),MMT.log.error(e.name+" for :: "+a+" with message "+e.message)}}}replaceMtIDsWithViewModelData(t.data,e),this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=i.oldViewModel,a=t.data;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];if(s&&s instanceof Object&&s.hasOwnProperty("view")){var l=router.getViewRendererFactory().getRenderer(s.view);try{l.rerender(getFirstElementWithClass(e,o),s,o)}catch(e){MMT.log.error("render in DropdownViewRenderer failed"),MMT.log.error(e.name+" with message "+e.message)}}}updateMtIDsWithViewModelData(t.data,e,n),this.postRenderActions(e,t,r)}}}function DropdownViewEventBinder(){this.bindEvents=function(e,t,r){}}function FormViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(replaceMtIDsWithViewModelData((t=i.viewModel).data,e),this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=i.oldViewModel;updateMtIDsWithViewModelData(t.data,e,n),this.postRenderActions(e,t,r)}}}function FormViewEventBinder(){this.bindEvents=function(e,t,r){var i=t.events;MMT.log.info("FormViewEventBinder :: "+r+" :: "+i),handleViewEvents(t,e,r,"FormViewEventBinder"),handleMTClick(t,e,r)}}function ImageViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(t=i.viewModel,this.populateImgSrcViewModelData(e,t.data),this.postRenderActions(e,t,r))},this.populateImgSrcViewModelData=function(e,t){try{t&&t.oLazyLoad&&!/rcarousel/i.test(t.type)&&"false"!==t.oLazyLoad.toLowerCase()?(e.setAttribute("data-src",t&&t.imgSrc),e.className+=" owl-lazy"):e.setAttribute("src",t&&t.imgSrc),t&&t.defaultImage&&e.setAttribute("onError","this.onerror=null;this.src='"+t.defaultImage+"'")}catch(e){MMT.log.error("populateImgSrcViewModelData failed for key, "+key),MMT.log.error(e.name+" with message "+e.message)}}}function ImageViewEventBinder(){this.bindEvents=function(e,t,r){router.getRenderedViewModelMap()[r]=deepCopyObject(t);t.events}}function ListViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(t=i.viewModel,MMT.log.debug("ListView Render started for className ::"+r),appendViewNodes(e,t,r,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),renderAndBindAllViewNodes(e,t.data,null,MMT_CONSTANTS.LIST_VIEW_WRAPPER,r),router.listViewRenderCompleteListener.publish(r,t),this.postRenderActions(e,t,r),MMT.log.debug("ListView Render ended for className ::"+r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=i.oldViewModel,a=t.data,o=n&&n.data,s=(new Date).getTime();MMT.log.debug("ListView Rerender started for className"+r),MMT.log.debug("ListView Rerender started "+s);var l=a.length,d=o&&o.length;if(d||(d=0),d>l)deleteAllViewNodes(e,MMT_CONSTANTS.LIST_VIEW_WRAPPER),appendViewNodes(e,t,r,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),o=null;else{for(var c=-1,p=0;p<d;p++){if(!o[p].data.hasOwnProperty("hashid")||!a[p].data.hasOwnProperty("hashid")){MMT.log.error("Error :: Missing Hash Id");break}if(o[p].data.hashid!==a[p].data.hashid)break;c=p}if(MMT.log.info("Index Till Same is :: "+c),c+1>=l)return;c>=0?(deleteAllViewNodesFrom(e,c+2,MMT_CONSTANTS.LIST_VIEW_WRAPPER),appendViewNodesFrom(e,t,r,c+1,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),o=o.slice(0,c+1)):(deleteAllViewNodes(e,MMT_CONSTANTS.LIST_VIEW_WRAPPER),appendViewNodes(e,t,r,MMT_CONSTANTS.LIST_VIEW_WRAPPER,MMT_CONSTANTS.LIST_VIEW_ID),o=null)}MMT.log.info("ListView Nodes addition ended "+((new Date).getTime()-s)+" ms"),renderAndBindAllViewNodes(e,a,o,MMT_CONSTANTS.LIST_VIEW_WRAPPER,r),MMT.log.info("ListView Rerender ended "+((new Date).getTime()-s)+" ms"),MMT.log.debug("ListView Rerender ended for className"+r),router.listViewRenderCompleteListener.publish(r,t),this.postRenderActions(e,t,r)}}}function ListViewEventBinder(){this.bindEvents=function(e,t,r){var i=t.events;MMT.log.debug("ListViewEventBinder :: "+r+" :: "+i),handleViewEvents(t,e,r,"ListViewEventBinder"),handleMTClick(t,e,r)}}function PaginatedCarouselViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){var n=(t=i.viewModel)&&t.data&&t.data.list,a=t&&t.data&&t.data.meta;a=JSON.stringify(a),e.setAttribute("mt-carousel-meta",a);var o=(new Date).getTime(),s=document.createElement("div");s.setAttribute("mt-hash-osel-inner","carousel_"+o),e.appendChild(s);var l=getFirstElementWithAttributeName(e,"mt-carousel-next"),d=getFirstElementWithAttributeName(e,"mt-carousel-prev");l&&l.setAttribute("id","rcarousel_next_"+o),d&&d.setAttribute("id","rcarousel_prev_"+o);var c=document.createElement("img");c.setAttribute("class","img-responsive"),c.setAttribute("mt-view","image_view"),e.setAttribute("mt-hash-osel","carousel_"+o);for(var p in n)if(n.hasOwnProperty(p)){var u=n[p];if(u&&u instanceof Object&&u.hasOwnProperty("view")){var h=document.createElement("div");h.setAttribute("class","mt-item");var M=router.getViewRendererFactory().getRenderer(u.view),m=c.cloneNode(!0);m.style.display="",h.appendChild(m),s.appendChild(h),M.render(m,u,p)}}this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var i=e.getAttribute("mt-hash-osel");e.removeChild(e.querySelector('[mt-hash-osel-inner="'+i+'"]')),this.render(e,t,r)}}function PaginatedViewEventBinder(){this.bindEvents=function(e,t,r){router.getRenderedViewModelMap()[r]=deepCopyObject(t);var i=t.events;for(var n in i)if(n.startsWith("mt_event_")){var a=i[n];n=n.split("mt_event_")[1];try{bindExecutePaginatedCarouselEvent(a,e),handleMTClick(t,e,r)}catch(e){MMT.log.error("Paginated CarouselEvent failed to bind events"),MMT.log.error(e.name+" with message "+e.message)}}}}function RadioButtonViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;for(var n=e.getElementsByTagName("input"),a=0;a<n.length;a++){var o=n[a];"radio"===o.getAttribute("type")&&o.getAttribute("name")===t.data.name&&(o.value===t.data.selected?o.checked=!0:o.checked=!1)}replaceMtIDsWithViewModelData(t.data,e),this.postRenderActions(e,t,r)}},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;i.oldViewModel;this.postRenderActions(e,t,r)}}}function RadioButtonViewEventBinder(){this.radioClickFunction=function(e,t){return function(){router.handleRadioButtonClick(e,t)}},this.bindEvents=function(e,t,r){var i=e.getElementsByTagName("input");if(i)for(var n=0;n<i.length>0;n++){var a=i[n];"radio"===a.getAttribute("type")&&a.getAttribute("name")===t.data.name&&(MMT.log.info("Event bound for "+a.value),a.onclick=this.radioClickFunction(a,t))}}}function ScrollViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=(new Date).getTime();MMT.log.debug("ScrollView Render started for className ::"+r),appendViewNodes(e,t,r,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),renderAndBindAllViewNodes(e,t.data,[],MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,r),router.getMoreListeners.publish(r,t),this.postRenderActions(e,t,r),MMT.log.debug("ScrollView Render ended for className ::"+r+" :: took :: "+((new Date).getTime()-n)+" ms")}},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){var n=i.viewModel,a=i.oldViewModel,o=n.data,s=a&&a.data,l=(new Date).getTime();MMT.log.debug("ScrollView Rerender started for className ::"+r),MMT.log.debug("ScrollView Rerender started at "+new Date(l).toString());var d=o.length,c=s&&s.length;if(c||(c=0),c>d)deleteAllViewNodes(e,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER),appendViewNodes(e,n,r,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),s=null;else{for(var p=-1,u=0;u<c;u++){if(!s[u].data.hasOwnProperty("hashid")||!o[u].data.hasOwnProperty("hashid")){MMT.log.error("Error :: Missing Hash Id");break}if(s[u].data.hashid!==o[u].data.hashid)break;p=u}if(MMT.log.info("Index Till Same is :: "+p),p+1>=d)return;p>=0?(deleteAllViewNodesFrom(e,p+2,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER),appendViewNodesFrom(e,n,r,p+1,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),s=s.slice(0,p+1)):(deleteAllViewNodes(e,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER),appendViewNodes(e,n,r,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,MMT_CONSTANTS.SCROLL_VIEW_ID),s=null)}MMT.log.info("ScrollView Nodes addition ended "+((new Date).getTime()-l)+" ms"),renderAndBindAllViewNodes(e,o,s,MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,r),MMT.log.info("ScrollView Rerender ended "+((new Date).getTime()-l)+" ms"),MMT.log.debug("ScrollView Rerender ended for className"+r),router.getMoreListeners.publish(r,n),this.postRenderActions(e,n,r)}}}function ScrollViewEventBinder(){this.bindEvents=function(e,t,r){var i=t.events;if(MMT.log.debug("ScrollViewEventBinder :: "+r+" :: "+i),handleViewEvents(t,e,r,"ScrollViewEventBinder"),handleMTClick(t,e,r),i&&i.get_more_api){var n=i.get_more_api,a=function(){return this.getMore=function(){var e,i,a;e=n,i=t,a=r,$.ajax({url:e,xhrFields:{withCredentials:!0},async:!0,success:function(e,t,r){i=router.getViewModel(a);for(var n in e)if("data"===n)for(var o=0;o<e.data.length;o++)i.data.push(e.data[o]);else i[n]=e[n];e.textStatus=t,e.XHR=r,router.getMoreListeners.publish(a,e),router.rerender(a)},error:function(e,t,r){var i={XHR:e,textStatus:t,errorThrown:r};router.getMoreListeners.publish(a,i)}})},{getMore:getMore}}();getMoreExecutorsMap[r]=a}}}function StaticViewRenderer(){this.render=function(e,t,r){var i=this.preRenderActions(e,t,r);i&&(replaceMtIDsWithViewModelData((t=i.viewModel).data,e),this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;var n=i.oldViewModel;updateMtIDsWithViewModelData(t.data,e,n),this.postRenderActions(e,t,r)}}}function StaticViewEventBinder(){this.bindEvents=function(e,t,r){handleViewEvents(t,e,r,"StaticViewEventBinder"),handleMTClick(t,e,r)}}function TextboxViewRenderer(){this.render=function(e,t,r){this.canBeShown(t,e)&&(e.value=t.data.value,this.postRenderActions(e,t,r))},this.rerender=function(e,t,r){var i=this.preRenderActions(e,t,r);if(i){t=i.viewModel;i.oldViewModel;e.value=t.data.value,this.postRenderActions(e,t,r)}}}function TextboxViewEventBinder(){this.modifyViewModel=function(e,t){return function(){router.handleTextboxChange(e,t)}},this.propagateChanges=function(e,t){return function(){router.handleTextboxUpdate(e,t)}},this.bindEvents=function(e,t,r){var i=this.modifyViewModel(e,t);e.onkeyup=i,e.onpaste=i,e.onblur=this.propagateChanges(e,t)}}function EventBinderFactory(){this.eventBinderMap={},this.getEventBinder=function(e){return"STATIC_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new StaticViewEventBinder),this.eventBinderMap[e]):"DROPDOWN_ITEM_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new DropdownItemViewEventBinder),this.eventBinderMap[e]):"AGGREGATE_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new AggregateViewEventBinder),this.eventBinderMap[e]):"SCROLL_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ScrollViewEventBinder),this.eventBinderMap[e]):"FORM_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new FormViewEventBinder),this.eventBinderMap[e]):"CAROUSEL_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new CarouselViewEventBinder),this.eventBinderMap[e]):"PAGINATEDCAROUSEL_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new PaginatedViewEventBinder),this.eventBinderMap[e]):"IMAGE_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ImageViewEventBinder),this.eventBinderMap[e]):"AJAX_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new AjaxViewEventBinder),this.eventBinderMap[e]):"LIST_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ListViewEventBinder),this.eventBinderMap[e]):"DROPDOWN_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new DropdownViewEventBinder),this.eventBinderMap[e]):"CHECKBOX_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new CheckboxViewEventBinder),this.eventBinderMap[e]):"RADIOBUTTON_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new RadioButtonViewEventBinder),this.eventBinderMap[e]):"TEXTBOX_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new TextboxViewEventBinder),this.eventBinderMap[e]):"COMPUTED_VIEW"===e?(this.eventBinderMap[e]||(this.eventBinderMap[e]=new ComputedViewEventBinder),this.eventBinderMap[e]):void 0}}function ViewRendererFactory(){this.rendererMap={},this.getRenderer=function(e){return"STATIC_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new StaticViewRenderer),this.rendererMap[e]):"AGGREGATE_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new AggregateViewRenderer),this.rendererMap[e]):"SCROLL_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ScrollViewRenderer),this.rendererMap[e]):"FORM_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new FormViewRenderer),this.rendererMap[e]):"AJAX_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new AjaxViewRenderer),this.rendererMap[e]):"CAROUSEL_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new CarouselViewRenderer),this.rendererMap[e]):"PAGINATEDCAROUSEL_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new PaginatedCarouselViewRenderer),this.rendererMap[e]):"IMAGE_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ImageViewRenderer),this.rendererMap[e]):"LIST_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ListViewRenderer),this.rendererMap[e]):"DROPDOWN_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new DropdownViewRenderer),this.rendererMap[e]):"DROPDOWN_ITEM_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new DropdownItemViewRenderer),this.rendererMap[e]):"CHECKBOX_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new CheckboxViewRenderer),this.rendererMap[e]):"RADIOBUTTON_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new RadioButtonViewRenderer),this.rendererMap[e]):"COMPUTED_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new ComputedViewRenderer),this.rendererMap[e]):"TEXTBOX_VIEW"===e?(this.rendererMap[e]||(this.rendererMap[e]=new TextboxViewRenderer),this.rendererMap[e]):void 0}}!function(e,t,r){t.DEBUG=!1,t.LOG_LEVEL="ERROR",Array.prototype.contains||(Array.prototype.contains=function(e){var t=e!=e;return(t||"function"!=typeof Array.prototype.indexOf?function(e){var r=-1,i=-1;for(r=0;r<this.length;r++){var n=this[r];if(t&&n!=n||n===e){i=r;break}}return i}:Array.prototype.indexOf).call(this,e)>-1}),Array.prototype.remove||(Array.prototype.remove=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return void this.splice(t,1)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var i,n=Math.pow(2,53)-1,a=(i="length",function(e){return null==e?void 0:e[i]});e.contains=function(e,t){for(var r in e)if(e[r]===t)return!0;return!1},e.each=function(e,t){var r,i,o,s,l;if("number"==typeof(l=a(e))&&l>=0&&l<=n)for(r=0,i=e.length;r<i;r++)t(r,e[r],e);else if("function"===(s=typeof(o=e))||"object"===s&&o){var d=Object.keys(e);for(r=0,i=d.length;r<i;r++)t(d[r],e[d[r]],e)}return e},e.log=function(){return this.debug=function(e){t.DEBUG&&MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.DEBUG&&console.debug(e)},this.info=function(e){t.DEBUG&&MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.INFO&&console.info(e)},this.error=function(e){t.DEBUG&&MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.ERROR&&console.error(e)},this.fatal=function(e){t.DEBUG&&MMT_CONSTANTS.LOGGER_LEVEL[t.LOG_LEVEL]<=MMT_CONSTANTS.LOGGER_LEVEL.FATAL&&console.log(e)},{debug:debug,info:info,error:error,fatal:fatal}}()}(window.MMT=window.MMT||{},window.config=window.config||{}),function(MMT,undefined){MMT.ViewModelPreProcessor||(MMT.ViewModelPreProcessor={preProcessANDFiltersMap:{},preProcessSortersMap:{},init:function(){this.preProcessANDFiltersMap={},this.preProcessSortersMap={}},addFilter:function(e,t,r){this.preProcessANDFiltersMap[e]||(this.preProcessANDFiltersMap[e]=[]),this.preProcessANDFiltersMap[e].contains(t)||(this.preProcessANDFiltersMap[e].push(t),r&&!0===r&&router.rerender(e))},removeFilter:function(e,t,r){this.preProcessANDFiltersMap[e]&&this.preProcessANDFiltersMap[e].contains(t)&&(this.preProcessANDFiltersMap[e].remove(t),MMT.log.info(this.preProcessANDFiltersMap[e]),r&&!0===r&&router.rerender(e))},addSorter:function(e,t,r){this.preProcessSortersMap[e]||(this.preProcessSortersMap[e]=[]),this.preProcessSortersMap[e].contains(t)||(this.preProcessSortersMap[e].push(t),r&&!0===r&&router.rerender(e))},removeSorter:function(e,t,r){this.preProcessSortersMap[e]&&this.preProcessSortersMap[e].contains(t)&&(this.preProcessSortersMap[e].remove(t),r&&!0===r&&router.rerender(e))},process:function(viewModel,className){var functions=this.preProcessANDFiltersMap[className];if(functions)for(var functionIndex=0;functionIndex<functions.length;functionIndex++){var functionName=functions[functionIndex];if(functionName){var evalString="viewModel = "+functionName+"(viewModel)";eval(evalString)}}var functions=this.preProcessSortersMap[className];if(functions)for(var functionIndex=0;functionIndex<functions.length;functionIndex++){var functionName=functions[functionIndex];if(functionName){var evalString="viewModel = "+functionName+"(viewModel)";eval(evalString)}}return viewModel}})}(window.MMT=window.MMT||{}),AbstractRenderer.prototype.canBeShown=function(viewModel,template){var shouldShowThis=!1;if(!template||!template.getAttribute)return MMT.log.error("Template is not available for :: "+JSON.stringify(viewModel)),!1;var showCommand=template.getAttribute("mt-show");if(showCommand){if(MMT.log.info(showCommand),eval("shouldShowThis = "+showCommand),MMT.log.info("Should Show This :: "+shouldShowThis),!shouldShowThis)return template.style.display="none",!1;template.style.display=""}if(template.getAttribute("mt-render-if")){var renderIfCondition=template.getAttribute("mt-render-if"),ifValue="",ifCommandString="ifValue = "+renderIfCondition;if(eval(ifCommandString),!ifValue)return template.parentNode.removeChild(template),!1}for(var index in template.childNodes){var child=template.childNodes[index];child&&1===child.nodeType&&(child.getAttribute("mt-view")||this.canBeShown(viewModel,child))}return!0},AbstractRenderer.prototype.handleMTAddCssClass=function(viewModel,template){var a=template.getAttribute("mt-addclass"),classApplied=!1;if(null!==a)try{if(o=JSON.parse(a),o&&"object"==typeof o)for(var key in o)o.hasOwnProperty(key)&&("classList"in document.createElement("_")&&template.classList.remove(key),eval(o[key])&&!1===classApplied&&(template.className+=" "+key,classApplied=!0))}catch(e){if("string"==typeof a){var cssClassNameCommand=template.getAttribute("mt-addclass"),cssClassName="",evalCommand="cssClassName = "+cssClassNameCommand;eval(evalCommand);var currentClassName=template.className,classNames=currentClassName.split(" ");classNames.contains(cssClassName)||(template.className+=" "+cssClassName)}}for(var index in template.children){var child=template.children[index];child&&1===child.nodeType&&(child.getAttribute("mt-view")||this.handleMTAddCssClass(viewModel,child))}return!1},AbstractRenderer.prototype.handleMTCustomAttributes=function(viewModel,template){if(template){if(template.getAttribute("mt-computed")){var computation=template.getAttribute("mt-computed"),value="",commandString="value = "+computation;eval(commandString),template.innerHTML=value}for(var allAttributes=template.attributes,index=0;index<allAttributes.length;index++){var currentAttribute=allAttributes[index];if(currentAttribute&&currentAttribute.name&&currentAttribute.name.startsWith("mt-attr-")){var htmlAttribute=currentAttribute.name.split("mt-attr-")[1],attrCommand=template.getAttribute(currentAttribute.name),attribValue="",attrCommandString="attribValue = "+attrCommand;eval(attrCommandString),template.setAttribute(htmlAttribute,attribValue)}}if(template.getAttribute("mt-style")){var styleCommand=template.getAttribute("mt-style"),styleValue="",styleCommandString="styleValue = "+styleCommand;eval(styleCommandString),template.setAttribute("style",styleValue)}for(var index in template.childNodes){var child=template.childNodes[index];child&&1===child.nodeType&&(child.getAttribute("mt-view")||this.handleMTCustomAttributes(viewModel,child))}}},AbstractRenderer.prototype.postRenderActions=function(template,viewModel,className){this.handleMTCustomAttributes(viewModel,template),this.handleMTAddCssClass(viewModel,template),router.getRenderedViewModelMap()[className]=deepCopyObject(viewModel);var eventBinder=router.eventBinderFactory.getEventBinder(viewModel.view);if(eventBinder.bindEvents(template,viewModel,className),template.getAttribute("mt-postrender")){var postRenderCall=template.getAttribute("mt-postrender");eval(postRenderCall)}},AbstractRenderer.prototype.preRenderActions=function(template,viewModel,className){if(this.canBeShown(viewModel,template)){if(template.getAttribute("mt-prerender")){var preRenderCall=template.getAttribute("mt-prerender");eval(preRenderCall)}viewModel=this.preRenderProcessing(viewModel,className);var oldViewModel=router.getRenderedViewModelMap()[className];return{viewModel:viewModel,oldViewModel:oldViewModel}}},AbstractRenderer.prototype.preRenderProcessing=function(e,t){return MMT.ViewModelPreProcessor.process(e,t)},AggregateViewRenderer.prototype=Object.create(AbstractRenderer.prototype),AggregateViewRenderer.prototype.constructor=AggregateViewRenderer,AjaxViewRenderer.prototype=Object.create(AbstractRenderer.prototype),AjaxViewRenderer.prototype.constructor=AjaxViewRenderer,CarouselViewRenderer.prototype=Object.create(AbstractRenderer.prototype),CarouselViewRenderer.prototype.constructor=CarouselViewRenderer,CheckboxViewRenderer.prototype=Object.create(AbstractRenderer.prototype),CheckboxViewRenderer.prototype.constructor=CheckboxViewRenderer,ComputedViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ComputedViewRenderer.prototype.constructor=ComputedViewRenderer,DropdownItemViewRenderer.prototype=Object.create(AbstractRenderer.prototype),DropdownItemViewRenderer.prototype.constructor=DropdownItemViewRenderer,DropdownViewRenderer.prototype=Object.create(AbstractRenderer.prototype),DropdownViewRenderer.prototype.constructor=DropdownViewRenderer,FormViewRenderer.prototype=Object.create(AbstractRenderer.prototype),FormViewRenderer.prototype.constructor=FormViewRenderer,ImageViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ImageViewRenderer.prototype.constructor=ImageViewRenderer,ListViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ListViewRenderer.prototype.constructor=ListViewRenderer,PaginatedCarouselViewRenderer.prototype=Object.create(AbstractRenderer.prototype),PaginatedCarouselViewRenderer.prototype.constructor=PaginatedCarouselViewRenderer,RadioButtonViewRenderer.prototype=Object.create(AbstractRenderer.prototype),RadioButtonViewRenderer.prototype.constructor=RadioButtonViewRenderer,ScrollViewRenderer.prototype=Object.create(AbstractRenderer.prototype),ScrollViewRenderer.prototype.constructor=ScrollViewRenderer,StaticViewRenderer.prototype=Object.create(AbstractRenderer.prototype),StaticViewRenderer.prototype.constructor=StaticViewRenderer,TextboxViewRenderer.prototype=Object.create(AbstractRenderer.prototype),TextboxViewRenderer.prototype.constructor=TextboxViewRenderer,getMoreExecutorsMap={};var eventsMap={view:"view",mt_loader:"mt_loader"};function replaceMtIDsWithViewModelData(e,t){if(t)for(var r in e)try{if(eventsMap[r])continue;if(e.hasOwnProperty(r)){var i=t.querySelectorAll('[mt-id="'+r+'"]');if(i&&i.length>0)for(var n=0;n<i.length;n++)i[n].innerHTML=e[r];if((i=t.querySelectorAll('[mt-src="'+r+'"]'))&&i.length>0)for(n=0;n<i.length;n++)i[n].setAttribute("src",e[r]);if((i=t.querySelectorAll('[mt-href="'+r+'"]'))&&i.length>0)for(n=0;n<i.length;n++)i[n].setAttribute("href",e[r])}}catch(e){MMT.log.error("replaceMtIDsWithViewModelData failed for key, "+r),MMT.log.error(e.name+" with message "+e.message)}}function updateMtIDsWithViewModelData(e,t,r){for(var i in e)try{if(r&&i in r&&r[i]===e[i])continue;replaceMtIDsWithViewModelData(e,t)}catch(e){MMT.log.error("replaceMtIDsWithViewModelData failed for key, "+i),MMT.log.error(e.name+" with message "+e.message)}}function bindExecuteEvent(viewModel,eventView,eventElement){if("execute"===eventView.type){var evalValue=eventView.value;if(!eventElement)return void MMT.log.debug("Problem :: "+JSON.stringify(viewModel));eventElement.onclick=function(){MMT.log.debug("Eval content :: "+evalValue),eval(evalValue)}}}function bindExecuteCarouselEvent(e,t,r){var i={items:1,navigation:!0,loop:!0},n=r.getAttribute("mt-carouseloptions");if(n)try{n=JSON.parse(n),i={};for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a])}catch(e){}"carousel"===e.type&&setTimeout(function(){t.owlCarousel(i)},1)}function bindExecutePaginatedCarouselEvent(e,t){var r=t.querySelectorAll("[mt-hash-osel-inner]")[0].getAttribute("mt-hash-osel-inner"),i=r.split("carousel_")[1],n=$("div[mt-hash-osel-inner='"+r+"']"),a={visible:1,step:1,orientation:"horizontal",auto:{enabled:!0,direction:"next",interval:2e3}},o=t.getAttribute("mt-carouseloptions");if(o)try{o=JSON.parse(o),a={};for(var s in o)o.hasOwnProperty(s)&&(a[s]=o[s])}catch(e){}a.navigation&&(a.navigation.next="#rcarousel_next_"+i,a.navigation.prev="#rcarousel_prev_"+i),"rcarousel"===e.type&&setTimeout(function(){n.rcarousel(a)},1)}function bindFormSubmitEvent(e,t,r,i){if("submit"===e.type){var n=e.value;t.onclick=function(){for(var e in r)if("view"!==e&&!e.startsWith("mt_event_"))try{r[e]=getFirstElementWithID(i,e).value}catch(e){MMT.log.error("FormViewEventBinder failed to bind events"),MMT.log.error(e.name+" with message "+e.message)}MMT.log.info("API to POST is : "+n),MMT.log.info("Value to POST is : "+JSON.stringify(r))}}}function bindAjaxEvent(e,t,r){if("ajax"===t.type){var i=t.value;r.onclick=function(){$.ajax({url:i,xhrFields:{withCredentials:!0},async:!0,success:function(e){var t=e;router.updatePartialModel(t)},error:function(e){MMT.log.error("Error while bindAjaxEvent for URL:: "+i+" :: Error :: "+e)}})}}}function bindClientSideExecutionEvent(e,t,r){r.onclick=function(){if("client"===t.type){var e=r.getAttribute("mt-command");if(e){MMT.log.info("Command String :: "+e);var i=e.split(" "),n=i[2],a=i[1];router.addFilter(n,a)}}}}function EventIDNotInTemplateException(e){this.message=e,this.name="EventIDNotInTemplateException"}function MTClassNotInTemplateException(e){this.message=e,this.name="MTClassNotInTemplateException"}function MTIDNotInTemplateException(e){this.message=e,this.name="MTIDNotInTemplateException"}function getElementWithEventID(e,t){var r=e.querySelectorAll('[mt-event-id="'+t+'"]');if(r.length>0)return r[0]}function getFirstElementWithClass(e,t){if(e){var r=e.querySelectorAll('[mt-class="'+t+'"]');if(r.length>0)return r[0]}}function getLastElementWithClass(e,t){if(e){var r=e.querySelectorAll('[mt-class="'+t+'"]');if(r.length>0)return r[r.length-1]}}function getFirstElementWithAttribute(e,t,r){var i=e.querySelectorAll("["+t+'="'+r+'"]');if(i.length>0)return i[0]}function getFirstElementWithAttributeName(e,t){var r=e.querySelectorAll("["+t+"]");if(r.length>0)return r[0]}function getFirstElementWithID(e,t){var r=e.querySelectorAll('[mt-id="'+t+'"]');if(r&&r.length>0)return r[0]}function getFirstElementWithSrc(e,t){var r=e.querySelectorAll('[mt-src="'+t+'"]');if(r&&r.length>0)return r[0]}function getFirstElementWithHref(e,t){var r=e.querySelectorAll('[mt-href="'+t+'"]');if(r&&r.length>0)return r[0]}function changePropagator(){this.propagate=function(){}}var bindNavigationEvents=function(e,t,r){},deepCopyObject=function(e){return JSON.parse(JSON.stringify(e))};function extractUrlDetails(){var e={};return e.pathName=window.location.pathname.substr(1),e.params=extractQueryParams(),e}function extractQueryParams(){var e=window.location.search.substring(1);return parseQueryString(e)}var parseQueryString=function(e){var t,r,i,n={};if(""===e)return n;for(t=e.split(/&(?:amp;)?/gi),i=0;i<t.length;i++)n[(r=t[i].split("="))[0]]=r.slice(1).join("=");return n};function encodeURIComponentIfNeeded(e){return decodeURIComponent(e)===e?encodeURIComponent(e):e}var prepareUrl=function(e,t){var r=e;if(t&&""!==t){var i=Object.keys(t);i.length>0&&(r=e+"?"+i.map(function(e){return encodeURIComponentIfNeeded(e)+"="+encodeURIComponentIfNeeded(t[e])}).join("&"))}return MMT.log.info("URL being set in browser address bar :: "+r),r};function getAllElementWithClass(e,t){var r=e.querySelectorAll('[mt-class="'+t+'"]');if(r.length>0)return r;throw new MTClassNotInTemplateException("mt class not exists in template, "+t+" And the template is :: "+e.outerHTML)}function insertAfter(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function executeMultiAjaxView(e,t,r,i){var n="";for(var a in e)if(e.hasOwnProperty(a))try{if(a===MMT_CONSTANTS.AJAX_VIEW_LOADER)n=e[MMT_CONSTANTS.AJAX_VIEW_LOADER];else if(a===MMT_CONSTANTS.AJAX_VIEW_GET_API){router.getScreenModel(router.currentScreenKey,null,!0,!1).done(function(){var t={};t.url=e[MMT_CONSTANTS.AJAX_VIEW_GET_API],t.async=!0,t.method="GET",router.ajaxOnStartListener.publish(r,t),$.ajax({url:t.url,xhrFields:{withCredentials:!0},async:t.async,type:t.method,data:t.data,success:function(t){var i=t;for(var a in i)i.hasOwnProperty(a)&&(e[a]={},delete e[MMT_CONSTANTS.AJAX_VIEW_GET_API]);router.ajaxViewPostAPIResponseListener.publish(r),handleResponseFromAjaxViewCall(t,n),router.ajaxCompleteListener.publish(r),toggleAjaxViewLoading(n)},error:function(e,t,i){var a={XHR:e,textStatus:t,errorThrown:i};router.ajaxCompleteErrorListener.publish(r,a),toggleAjaxViewLoading(n)}})})}else if(e[a]instanceof Object){var o=router.getViewRendererFactory().getRenderer(e[a].view);i?o.render(getFirstElementWithClass(t,a),e[a],a):o.rerender(getFirstElementWithClass(t,a),e[a],a)}else{var s=getFirstElementWithID(t,a);s&&(s.innerHTML=e[a])}}catch(e){return MMT.log.error("executeMultiAjaxView failed for key, "+a),void MMT.log.error(e.name+" with message "+e.message)}}function handleResponseFromAjaxViewCall(e,t){var r=e;router.updatePartialModel(r);for(var i in r){if(r.hasOwnProperty(i))router.getTemplateFor(i).style.display=""}}function toggleAjaxViewLoading(e){if(""!=e){var t=getAllElementWithClass(router.getMainTemplate(),e);for(i=0;i<t.length;i++)t[i].style.display=MMT_CONSTANTS.NONE}}function executePostDownloadActions(e,t){return importTemplates(e,t)}function importTemplates(domTemplate,viewModel){var partialTemplate=domTemplate.querySelectorAll('[mt-include="import"]'),importPromises=[],resultPromise=$.Deferred();if(partialTemplate.length>0)for(index=0;index<partialTemplate.length;index++){var load=!0;if(partialTemplate[index].getAttribute("mt-include-if")){var cond=partialTemplate[index].getAttribute("mt-include-if");eval("isImport = "+cond),isImport||(load=!1)}if(load){var promiseInternal=makeDeferredAjaxCall(partialTemplate[index].getAttribute("href"),index).done(function(e,t){var r=partialTemplate[t].parentNode,i=document.createElement("div");i.innerHTML=e,r.replaceChild(i,partialTemplate[t])});importPromises.push(promiseInternal)}}return 0===importPromises.length?setTimeout(function(){resultPromise.resolve()},0):$.when.apply($,importPromises).always(function(){resultPromise.resolve()}),resultPromise.promise()}function makeDeferredAjaxCall(e,t){var r=$.Deferred();return $.ajax({url:e,xhrFields:{withCredentials:!0},async:!0,success:function(e){r.resolve(e,t)},error:function(t){MMT.log.error("Error while downloading import template via DefferedAjaxCall for URL:: "+e+" :: Error :: "+t),r.reject()}}),r.promise()}function manageMMTBrowserStates(e,t){e&&"initial"==e?(mmtReplaceState(t),router.setInitialRequest(!1)):e&&"pop"==e||mmtPushState(t)}function mmtPushState(e){MMT.log.info("State URL :: "+e.url),window.history.pushState(e,null,e.url)}function mmtReplaceState(e){void 0!==history.replaceState&&window.history.replaceState(e,null,e.url)}function bindEventsWithElement(e,t,r,i){e&&("execute"==t.type?(MMT.log.debug("Binding Execute Event for class Name:: "+r),bindExecuteEvent(i,t,e)):"ajax"==t.type?(MMT.log.debug("Binding Ajax Event for class Name:: "+r),bindAjaxEvent(i,t,e)):"client"==t.type&&(MMT.log.debug("Binding Client Side execute Event for class Name:: "+r),bindClientSideExecutionEvent(i,t,e)))}function resolveMTClick(clickableElement,viewModel){var functionName=clickableElement.getAttribute("mt-click");return clickableElement.onclick=function(event){eval(functionName+"(viewModel,event)")},functionName}function handleMTClick(e,t,r){if(t)if(t&&t.hasAttribute&&t.hasAttribute("mt-click"))resolveMTClick(t,e);else for(var i=0,n=t.childNodes;i<n.length;){var a=n[i++];a&&a.hasAttribute&&a.hasAttribute("mt-view")||a&&a.hasAttribute&&handleMTClick(e,a,r)}}function handleViewEvents(e,t,r,i){var n=e.events;if(n)for(var a in n)if(a.startsWith("mt_event_")){var o=n[a];a=a.split("mt_event_")[1];try{bindEventsWithElement(getElementWithEventID(t,a),o,r,e)}catch(e){MMT.log.error(i+" failed to bind events"),MMT.log.error(e.name+" with message "+e.message)}}}function getCheckboxElementFromCheckBoxView(e){var t=e.getElementsByTagName("input");if(t&&t.length>0)return t[0]}function getLabelElementFromCheckBoxView(e){var t=e.getElementsByTagName("label");if(t&&t.length>0)return t[0]}function appendViewNodes(e,t,r,i,n){var a=(new Date).getTime();MMT.log.debug("appendViewNodes started for className:: "+r),appendViewNodesFrom(e,t,r,0,i,n),MMT.log.debug("appendViewNodes ended for className:: "+r+" :: took :: "+((new Date).getTime()-a)+" ms")}function appendViewNodesFrom(e,t,r,i,n,a){var o="";if(n===MMT_CONSTANTS.LIST_VIEW_WRAPPER?o=MMT.compiler.getTemplateNodeForListViewItem(r):n===MMT_CONSTANTS.SCROLL_VIEW_WRAPPER&&(o=MMT.compiler.getTemplateNodeForScrollViewItem(r)),o)for(var s=i;s<t.data.length;s++){var l=createViewNode(t.data,s,o,a,r);e.appendChild(l)}else MMT.log.error("Template is missing for "+n+"for className:: "+r)}function createViewNode(e,t,r,i,n){(new Date).getTime();var a=e[t];router.getViewRendererFactory().getRenderer(a.view);try{var o=r.cloneNode(!0);o.style.display="none";var s=n+"---"+e[t].data.hashid;return MMT.compiler.addInGenClassNameMap(s,o),o.setAttribute(i,t),o}catch(e){MMT.log.error("createViewNode in Renderer failed for className :: "+n),MMT.log.error(e.name+" with message "+e.message)}}function getAllDirectChildViewNodes(e,t){for(var r=[],i=e.childNodes,n=0;n<i.length;n++){var a=i[n];a&&a.hasAttribute&&a.getAttribute("mt-class")===t&&r.push(a)}return r}function renderAndBindAllViewNodes(e,t,r,i,n){var a=(new Date).getTime();MMT.log.debug("renderAndBindAllViewNodes started for className:: "+n);for(var o=getAllDirectChildViewNodes(e,i),s=0;s<o.length;s++){var l=t[s];if(!l)return void MMT.log.info(" Failed :: "+s+" Partial Elements :: "+o.length);if(setGeneratedIndexValue(l,s),!(r&&r.length>s&&r[s].data.hashid===l.data.hashid)){var d=router.getViewRendererFactory().getRenderer(l.view);l.data||MMT.log.error("Some error :: "+JSON.stringify(l.data));var c=n+"---"+l.data.hashid,p=o[s];p.style.display="",d.render(p,l,c)}}MMT.log.debug("renderAndBindAllViewNodes ended for className:: "+n+" :: took :: "+((new Date).getTime()-a)+" ms")}function setGeneratedIndexValue(e,t){for(var r in e.data)if(e.data.hasOwnProperty(r)){var i=e.data[r];i&&i instanceof Object&&i.hasOwnProperty("view")&&"LIST_VIEW"!==i.view&&"SCROLL_VIEW"!==i.view&&setGeneratedIndexValue(i,t)}e&&e.data&&(e.data._index=t)}function deleteAllViewNodesFrom(e,t,r){for(var i=getAllDirectChildViewNodes(e,r);t<i.length;t++)i[t].parentNode&&i[t].parentNode.removeChild(i[t])}function deleteAllViewNodes(e,t){for(var r=getAllDirectChildViewNodes(e,t),i=0;i<r.length;i++)r[i].parentNode&&r[i].parentNode.removeChild(r[i])}function Router(templatesProvider,viewRendererFactory,eventBinderFactory,defaultScreenStateKey){this.viewRendererFactory=viewRendererFactory,this.eventBinderFactory=eventBinderFactory,this.templatesProvider=templatesProvider,this.initialRequest=!1,this.templateViewModelMap={},this.init=function(e){this.initialRequest=!0,this.screenUrlPrefix=e||"/screen/",window.addEventListener("popstate",function(e){e.state&&e.state.screenKey&&router.switchState(e.state.screenKey,e.state.params,"pop")});var t=extractUrlDetails();if(MMT.log.debug(t),""!==t.pathName)t.state=function(e){for(var t in MMT.templateMap)if(MMT.templateMap.hasOwnProperty(t)){var r=MMT.templateMap[t];if(r.hasOwnProperty("screenUrl")&&r.screenUrl===e)return t}return e}(t.pathName),router.switchState(t.state,t.params);else{var r=defaultScreenStateKey||"default";router.switchState(r)}};var listeners={};this.viewModelChangeListener={subscribe:function(e,t){listeners[e]?listeners[e].push(t):(listeners[e]=[],listeners[e].push(t)),MMT.log.debug("Subscribed :: "+e)},publish:function(e){if(e.startsWith("_gen_")){var t=e.split("---");e=t[t.length-1]}if(MMT.log.debug("Gonna Publish :: "+e),listeners[e]){var r=listeners[e];for(var i in r){var n=r[i];r.hasOwnProperty(i)&&n.apply()}}}};var pageLoadDeferred=$.Deferred(),pageLoadCompleteListeners=[];this.pageLoadCompleteListener={pageLoad:pageLoadDeferred,subscribe:function(e){pageLoadCompleteListeners.push(e),MMT.log.info("Subscribed for PageLoadComplete")},publish:function(){if(MMT.log.info("Publishing for PageLoadComplete"),pageLoadCompleteListeners)for(var e in pageLoadCompleteListeners){var t=pageLoadCompleteListeners[e];pageLoadCompleteListeners.hasOwnProperty(e)&&(t.apply(),pageLoadDeferred.resolve())}}};var getMorelisteners={};this.getMoreListeners={subscribe:function(e,t){getMorelisteners[e]?getMorelisteners[e].push(t):(getMorelisteners[e]=[],getMorelisteners[e].push(t)),MMT.log.info("Get More Listener Subscribed :: "+e)},publish:function(e,t){if(MMT.log.info("Get More Publish :: "+t),getMorelisteners[e]){var r=getMorelisteners[e];for(var i in r){var n=r[i];r.hasOwnProperty(i)&&n.call(null,t)}}}};var ajaxStartListeners={};this.ajaxOnStartListener={subscribe:function(e,t){MMT.log.info("Ajax OnStartListener Subscribed :: "+e),ajaxStartListeners[e]?ajaxStartListeners[e].push(t):(ajaxStartListeners[e]=[],ajaxStartListeners[e].push(t))},publish:function(e,t){if(ajaxStartListeners[e]){var r=ajaxStartListeners[e];for(var i in r){var n=r[i];r.hasOwnProperty(i)&&n(t)}}},reinit:function(){ajaxStartListeners={}}};var ajaxViewPostAPIResponseListeners={};this.ajaxViewPostAPIResponseListener={subscribe:function(e,t){ajaxViewPostAPIResponseListeners[e]?ajaxViewPostAPIResponseListeners[e].push(t):(ajaxViewPostAPIResponseListeners[e]=[],ajaxViewPostAPIResponseListeners[e].push(t)),MMT.log.info("Ajax View API Response Listener Subscribed :: "+e)},publish:function(e){if(MMT.log.info("Ajax View API Response Publish :: "+e),ajaxViewPostAPIResponseListeners[e]){var t=ajaxViewPostAPIResponseListeners[e];for(var r in t){var i=t[r];t.hasOwnProperty(r)&&i.call()}}},reinit:function(){ajaxViewPostAPIResponseListeners={}}};var ajaxCompleteListeners={};this.ajaxCompleteListener={subscribe:function(e,t){ajaxCompleteListeners[e]?ajaxCompleteListeners[e].push(t):(ajaxCompleteListeners[e]=[],ajaxCompleteListeners[e].push(t)),MMT.log.info("Ajax Complete Listener Subscribed :: "+e)},publish:function(e){if(MMT.log.info("Ajax Complete Publish :: "+e),ajaxCompleteListeners[e]){var t=ajaxCompleteListeners[e];for(var r in t){var i=t[r];t.hasOwnProperty(r)&&i.call()}}},reinit:function(){ajaxCompleteListeners={}}};var ajaxCompleteErrorListeners={};this.ajaxCompleteErrorListener={subscribe:function(e,t){ajaxCompleteErrorListeners[e]?ajaxCompleteErrorListeners[e].push(t):(ajaxCompleteErrorListeners[e]=[],ajaxCompleteErrorListeners[e].push(t)),MMT.log.info("Ajax Complete Error Listener Subscribed :: "+e)},publish:function(e,t){if(MMT.log.info("Ajax Complete Error Publish :: "+e+" :: "+t.textStatus),ajaxCompleteErrorListeners[e]){var r=ajaxCompleteErrorListeners[e];for(var i in r){var n=r[i];r.hasOwnProperty(i)&&n.call(null,t)}}},reinit:function(){ajaxCompleteErrorListeners={}}};var listViewRenderListeners={};function handleURLState(e,t,r,i){var n=prepareUrl("/"+e,t);MMT.log.info("Address Bar URL :: "+n);var a={url:n,screenKey:r,params:t};router.screenState=a,manageMMTBrowserStates(i,a)}function executePreScreenModelFetchListener(e){var t=this.templatesProvider.getScreenModelCallStartListener(e);t&&t.call()}function executePostScreenModelFetchListener(e){var t=this.templatesProvider.getScreenModelCallCompleteListener(e);t&&t.call()}function executeScreenModelFetchErrorListener(e){var t=this.templatesProvider.getScreenModelCallErrorListener(e);t&&t.call()}this.listViewRenderCompleteListener={subscribe:function(e,t){MMT.log.info("ListView RenderCompleteListener Subscribed :: "+e),listViewRenderListeners[e]?listViewRenderListeners[e].push(t):(listViewRenderListeners[e]=[],listViewRenderListeners[e].push(t))},publish:function(e,t){if(listViewRenderListeners[e]){var r=listViewRenderListeners[e];for(var i in r){var n=r[i];r.hasOwnProperty(i)&&n(t)}}},reinit:function(){listViewRenderListeners={}}},this.mainViewTemplate=null,this.mainScreenModel=null,this.getRenderedViewModelMap=function(){return this.templateViewModelMap},this.getViewRendererFactory=function(){return this.viewRendererFactory},this.getEventBinderFactory=function(){return this.eventBinderFactory},this.getMainTemplate=function(){return this.screenTemplate},this.getMainScreenModelReference=function(){return this.mainScreenModel},this.getInitialRequest=function(){return this.initialRequest},this.setInitialRequest=function(e){this.initialRequest=e},this.updateMainViewModelInternal=function(e,t,r){for(var i in r){if(i===e)return void(r[i]=t);if(i instanceof Object)return this.updateMainViewModelInternal(mref,t,r[i].data)}},this.updateMainViewModel=function(e,t){this.updateMainViewModelInternal(e,t,this.mainScreenModel.data)},this.renderInitialViewModel=function(e,t,r){this.getViewRendererFactory().getRenderer(e.view).render(t,e,r);var i=this.updateDOM(t);this.screenTemplate=i,this.renderComputedViews(),bindNavigationEvents(e,i,r),this.bindViewModelChangeListeners()},this.bindViewModelChangeListeners=function(){for(var e=this.screenTemplate.querySelectorAll("[mt-compute-on]"),t=0;t<e.length;t++){var r=e[t].getAttribute("mt-compute-on");router.viewModelChangeListener.subscribe(r,function(){router.rerender()})}},this.renderComputedViews=function(){for(var e=this.screenTemplate.querySelectorAll('[mt-view="computed_view"]'),t=0;t<e.length;t++){var r=this.getViewRendererFactory().getRenderer("COMPUTED_VIEW"),i=e[t];MMT.log.info("Computed View :: "+i.tagName);var n=i.getAttribute("mt-parent-view");if(n){var a=router.getViewModel(n);a?r.render(i,a,""):MMT.log.debug("Error in COMPUTED_VIEW :: parentViewModel not found for node.")}else r.render(i,this.mainScreenModel,"")}},this.getTemplateFor=function(e){return e.includes("---")?MMT.compiler.getTemplateNodeWithGenClass(e):MMT.compiler.getTemplateNodeWithMTClass(e)},this.rerender=function(e){var t=this.mainScreenModel,r=this.mainViewKey,i=this.mainViewTemplate;e&&(t=this.getViewModel(e),r=e,i=this.getTemplateFor(e)),this.getViewRendererFactory().getRenderer(t.view).rerender(i,t,r),this.renderComputedViews()},this.initializeMainScreenModel=function(e){var t=e.screenModel;for(var r in t){t.hasOwnProperty(r)&&(this.mainViewKey=r,this.mainScreenModel=t[r],MMT.log.info("Main View Key :: "+this.mainViewKey),MMT.log.info("Main View Model :: "+this.mainScreenModel));break}},this.noScreenModel=function(e){var t=MMT.templateMap[e];return!(!t||!t.noScreenModel)&&t.noScreenModel},this.getScreenUrl=function(e){var t=MMT.templateMap[e];return t&&t.screenUrl?t.screenUrl:e},this.screenPromises={},this.getScreenModel=function(e,t,r,i){var n=this;if(n.currentScreenKey=e,this.screenPromises[e]&&!i)return this.screenPromises[e].promise();this.screenPromises[e]=$.Deferred();var a=this.screenPromises[e],o="";return""===this.getScreenUrl(e)||this.noScreenModel(e)?(o="Error Screen is not defined for the screen state key, "+e,MMT.log.error(o),setTimeout(function(){a.reject(o,n)},0)):$.ajax({url:"/seo-api/hotels/dt_new",type:"GET",data:t,async:r,success:function(e){a.resolve(JSON.parse(e),n)},error:function(t){o="Error while fetching ScreenModel for Key:: "+e+" :: Error :: "+t,MMT.log.error(o),a.reject(o,n)}}),a.promise()},this.executeStyleElements=function(e){if(e){if("LINK"===e.tagName)document.getElementsByTagName("head")[0].appendChild((i=e,(n=document.createElement("link")).rel="stylesheet",n.type="text/css",n.href=i.href,n));else for(var t=0,r=e.childNodes;t<r.length;)this.executeStyleElements(r[t++]);return e}var i,n},this.switchState=function(e,t,r){pageLoadCompleteListeners=[],router.screenState={},router.templateViewModelMap={},MMT.compiler.reinit(),MMT.ViewModelPreProcessor.init(),this.ajaxCompleteListener.reinit(),this.ajaxOnStartListener.reinit(),this.ajaxViewPostAPIResponseListener.reinit(),this.ajaxCompleteErrorListener.reinit(),this.listViewRenderCompleteListener.reinit();var i=this.templatesProvider.getTemplateForInterstitial(e),n=this.getScreenUrl(e);this.getInitialRequest()&&(r="initial"),handleURLState(n,t,e,r),executePreScreenModelFetchListener.call(this,e),this.getScreenModel(e,t,i,!0).done(function(t,r){executePostScreenModelFetchListener.call(r,e),r.initializeMainScreenModel(t),r.templatesProvider.getTemplateFor(t).done(function(e,i){i.pageComplete&&r.pageLoadCompleteListener.subscribe(i.pageComplete);var n=document.getElementsByTagName("page-view")[0];n.innerHTML=e,executePostDownloadActions(n,t).always(function(){MMT.compiler.compile(n),r.screenTemplate=n,r.mainViewTemplate=MMT.compiler.getTemplateNodeWithMTClass(r.mainViewKey),r.renderInitialViewModel(r.mainScreenModel,r.mainViewTemplate,r.mainViewKey)})})}).fail(function(t,r){executeScreenModelFetchErrorListener.call(r,e);var i={};i.screen=e,r.templatesProvider.getTemplateFor(i).done(function(e,t){t.pageComplete&&r.pageLoadCompleteListener.subscribe(t.pageComplete),document.getElementsByTagName("page-view")[0].innerHTML=e,r.pageLoadCompleteListener.publish()})})},this.updateDOM=function(e){var t=document.getElementsByTagName("page-view");if(t.length>0){var r=t[0];return this.totalScripts=this.screenTemplate.getElementsByTagName("script").length,MMT.log.info("Total number of scripts to include is, "+this.totalScripts),this.totalScripts&&0!==this.totalScripts?this.executeScriptElements(this.screenTemplate):router.pageLoadCompleteListener.publish(),r}throw new PageViewMissingException("Fatal Error :: page-view tag is missing!")},this.executeScriptElements=function(e){if(!0===this.isScriptNode(e))this.isScriptSrc(e)?e.parentNode.replaceChild(this.cloneScriptNode(e),e):this.cloneScriptNode(e);else for(var t=0,r=e.childNodes;t<r.length;)this.executeScriptElements(r[t++]);return e},this.isScriptNode=function(e){return"SCRIPT"===e.tagName},this.isScriptSrc=function(e){return!(!e||"SCRIPT"!==e.tagName||""!==e.innerHTML)},this.cloneScriptNode=function(node){if(this.isScriptSrc(node)){var script=document.createElement("script");script.text=node.innerHTML;var script=document.createElement("script");script.text=node.innerHTML,script.async=!1;for(var i=node.attributes.length-1;i>=0;i--)script.setAttribute(node.attributes[i].name,node.attributes[i].value);script.onload=function(){router.totalScripts-=1,0===router.totalScripts&&router.pageLoadCompleteListener.publish()},script.onerror=function(){router.totalScripts-=1,0===router.totalScripts&&router.pageLoadCompleteListener.publish()}}else eval(node.innerHTML),router.totalScripts-=1,0===router.totalScripts&&router.pageLoadCompleteListener.publish();return script},this.addFilter=function(e,t,r){MMT.ViewModelPreProcessor.addFilter(e,t,r)},this.removeFilter=function(e,t,r){MMT.ViewModelPreProcessor.removeFilter(e,t,r)},this.addSorter=function(e,t,r){MMT.ViewModelPreProcessor.addSorter(e,t,r)},this.removeSorter=function(e,t,r){MMT.ViewModelPreProcessor.removeSorter(e,t,r)},this.propagateUpward=function(e){setTimeout(function(t){if(e){if(e.getAttribute("mt-class")){var r=e.getAttribute("mt-class");MMT.log.info("Publishing the change :: "+r),t.viewModelChangeListener.publish(r)}e.parentNode&&e.parentNode.getAttribute&&t.propagateUpward(e.parentNode)}}(this),0)},this.getViewModelInternal=function(e,t){for(var r in t)if(t.hasOwnProperty(r)){if(r===e)return t[r];if("object"==typeof t[r]){var i=this.getViewModelInternal(e,t[r]);if(i)return i}}},this.updatePartialModelInternal=function(e,t,r){for(var i in r)if(r.hasOwnProperty(i)){if(i===e)return r[i]=t,router.rerender(i),!0;if("object"==typeof r[i]){var n=this.updatePartialModelInternal(e,t,r[i]);if(n)return n}}},this.getRenderedViewModel=function(e){if(e&&this.getRenderedViewModelMap()[e])return this.getRenderedViewModelMap()[e]},this.getViewModel=function(e){if(!e.includes("---")){if(e===this.mainViewKey)return this.mainScreenModel;var t=this.mainScreenModel;return this.getViewModelInternal(e,t)}var r=e.split("---");e=r[0];var i=r[1],n=this.getViewModel(e);if(n&&n.data)for(var a=n.data,o=0;o<a.length;o++){var s=a[o].data.hashid;if(s&&s===i)return n.data[o]}},this.updatePartialModel=function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],i=this.getViewModel(t);if(!i){MMT.log.error("View Model not found in screenModel for Key :: "+t);continue}i.data=r.data,i.view=r.view,i.events=r.events,this.rerender(t)}},this.handleCheckBoxClick=function(e,t){MMT.log.info(e.id),MMT.log.info(e.checked),t.data.value=e.checked.toString(),t.data[t.data.key]=e.checked,MMT.log.info(JSON.stringify(t)),this.propagateUpward(e)},this.handleRadioButtonClick=function(e,t){MMT.log.info(e.value),MMT.log.info(e.checked),e.checked&&(t.data.selected=e.value),MMT.log.info(JSON.stringify(t)),this.propagateUpward(e)},this.handleTextboxChange=function(e,t){t.data.value=e.value},this.handleTextboxUpdate=function(e,t){t.data.value=e.value,this.propagateUpward(e)}}!function(e){e.compiler=e.compiler||{},e.compiler.nodesMTClassNamesMap={},e.compiler.nodesGenClassNamesMap={},e.compiler.reinit=function(){e.compiler.nodesMTClassNamesMap={},e.compiler.nodesGenClassNamesMap={}},e.compiler.compile=function(t){if(t&&t.hasAttribute)try{if((h=t).hasAttribute("mt-class")||h.hasAttribute("mt-compile-class")){var r=(u=t).hasAttribute("mt-compile-class")?u.getAttribute("mt-compile-class"):u.getAttribute("mt-class");e.compiler.addInMTClassNameMap(r,t);var i=t.getAttribute("mt-view");if("scroll_view"===i){if((s=t.querySelectorAll('[mt-class="'+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER+'"]'))&&s.length>0){var n=s[0],a=r+"---"+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER,o=n.cloneNode(!0);console.log(o),n.setAttribute("mt-compile-class",a),e.compiler.addInMTClassNameMap(a,o),e.compiler.compile(n),t.removeChild(n)}}else if("list_view"===i){var s;if((s=t.querySelectorAll('[mt-class="'+MMT_CONSTANTS.LIST_VIEW_WRAPPER+'"]'))&&s.length>0){var l=s[0];a=r+"---"+MMT_CONSTANTS.LIST_VIEW_WRAPPER;l.setAttribute("mt-compile-class",a);var d=l.cloneNode(!0);e.compiler.addInMTClassNameMap(a,d),e.compiler.compile(l),t.removeChild(l)}}}var c=t.childNodes;if(c)for(var p=0;p<c.length;p++)e.compiler.compile(c[p])}catch(t){e.log.error(t.message)}var u,h},e.compiler.addInMTClassNameMap=function(t,r){t!==MMT_CONSTANTS.SCROLL_VIEW_WRAPPER&&t!==MMT_CONSTANTS.LIST_VIEW_WRAPPER&&(e.compiler.nodesMTClassNamesMap[t]=r)},e.compiler.addInGenClassNameMap=function(t,r){e.compiler.nodesGenClassNamesMap[t]=r},e.compiler.getTemplateNodeWithGenClass=function(t){return e.compiler.nodesGenClassNamesMap[t]},e.compiler.getTemplateNodeWithMTClass=function(t){if(e.compiler.nodesMTClassNamesMap.hasOwnProperty(t))return e.compiler.nodesMTClassNamesMap[t];throw new MTClassNotInTemplateException(t+" doesn't exist")},e.compiler.getTemplateNodeForScrollViewItem=function(t){var r=t.split("---"),i=r[0];if(r.length>1)for(var n=0;n<r.length;n++)i=i+"---"+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER;return e.compiler.getTemplateNodeWithMTClass(i+"---"+MMT_CONSTANTS.SCROLL_VIEW_WRAPPER)},e.compiler.getTemplateNodeForListViewItem=function(t){var r=t.split("---"),i=r[0];if(r.length>1)for(var n=0;n<r.length-1;n++)i=i+"---"+MMT_CONSTANTS.LIST_VIEW_WRAPPER;return e.compiler.getTemplateNodeWithMTClass(i+"---"+MMT_CONSTANTS.LIST_VIEW_WRAPPER)}}(window.MMT=window.MMT||{}),function(e,t,r){e.cache=e.cache||{};var i=void 0!==i?i:this,n=(i.document,"localStorage"),a="sessionStorage";if(e.cache.disabled=!1,e.cache.set=function(e,t){},e.cache.get=function(e,t){},e.cache.has=function(t){return e.cache.get(t)!==r},e.cache.remove=function(e){},e.cache.clear=function(){},e.cache.getAll=function(){var t={};return e.cache.forEach(function(e,r){t[e]=r}),t},e.cache.forEach=function(){},e.cache.serialize=function(e){return JSON.stringify(e)},e.cache.deserialize=function(e){if("string"!=typeof e)return r;try{return JSON.parse(e)}catch(t){return e||r}},function(){try{var t=n in i&&i[n];return e.log.info("Local Storage Supported :: "+t),t}catch(e){return!1}}()){var o=i[n];e.cache.set=function(t,i){return i===r?e.cache.remove(t):(o.setItem(t,e.cache.serialize(i)),i)},e.cache.get=function(t,i){var n=e.cache.deserialize(o.getItem(t));return n===r?i:n},e.cache.remove=function(e){o.removeItem(e)},e.cache.clear=function(){o.clear()},e.cache.forEach=function(t){for(var r=0;r<o.length;r++){var i=o.key(r);t(i,e.cache.get(i))}}}e.cache.session=function(){var t={};if(a in i&&i[a]){var n=i[a];t.remove=function(e){n.removeItem(e)},t.set=function(i,a){return a===r?t.remove(i):(n.setItem(i,e.cache.serialize(a)),a)},t.get=function(t,i){var a=e.cache.deserialize(n.getItem(t));return a===r?i:a},t.clear=function(){n.clear()},t.forEach=function(e){for(var r=0;r<n.length;r++){var i=n.key(r);e(i,t.get(i))}}}return t}();try{var s="__mmtcache__";e.cache.set(s,s),e.cache.get(s)!=s&&(e.cache.disabled=!0),e.cache.remove(s)}catch(t){e.log.error("Cache Availability Test :: "+t.message),e.cache.disabled=!0}e.cache.enabled=!e.cache.disabled,e.cache}(window.MMT=window.MMT||{},window.config=window.config||{}),function(e){e.templateCache=e.templateCache||{};var t={};function r(t){if(t){if(e.templateCache.get(t))return;$.ajax({url:t,async:!0,success:function(r){e.templateCache.put(t,r)},error:function(r){e.log.error("Error while prefetching template for URL:: "+t+" :: Error :: "+r)}})}}e.templateCache.put=function(e,r){t[e]=r},e.templateCache.get=function(e){return t[e]},e.templateCache.prefetch=function(e){for(var t in e)e.hasOwnProperty(t)&&r(e[t].url)},e.templateCache.prefetchDetails=function(){for(var r in t)e.log.debug(r)},e.templateCache}(window.MMT=window.MMT||{}),function(e){"use strict";var t=t||{};e.ajaxCall={};var r,i;e.ajaxCall=(r=function(e,r,i,n,a){var o,s="timestamp",l="promise";try{if(n){r+="?";var d=0;for(var c in n)n.hasOwnProperty(c)&&(d++&&(r+="&"),r+=encodeURIComponent(c)+"="+encodeURIComponent(args[c]))}var p="";"GET"===e?p=e+":"+r:(p=e+":"+r,a&&(p+=":"+JSON.stringify(a))),MMT.log.info("Ajax Key :: "+p);var u=t[p];if(u){var h=((new Date).getTime()-u[s])/1e3;if(MMT.log.info("Time Stamp Difference in Seconds :: "+h),h<i)return u[l];delete t[p]}}catch(e){return void MMT.log.error("Failed during AJAX Call :: "+e.message)}return o="GET"===e?$.ajax({method:e,url:r,async:!0}):$.ajax({method:e,url:r,async:!0,contentType:"application/json; charset=utf-8",data:a}),(u={})[l]=o,u[s]=(new Date).getTime(),u.timeToLive=i,t[p]=u,o},i=function(e,r,i,n,a){try{if(n){r+="?";var o=0;for(var s in n)n.hasOwnProperty(s)&&(o++&&(r+="&"),r+=encodeURIComponent(s)+"="+encodeURIComponent(args[s]))}var l="";if("GET"===e?l=e+":"+r:(l=e+":"+r,a&&(l+=":"+JSON.stringify(a))),MMT.log.info("Ajax Key :: "+l),t[l])return delete t[l],!0}catch(e){MMT.log.error("Failed during Remove Promise Call :: "+e.message)}return!1},{get:function(e,t,i,n){return r("GET",e,t,i,n)},post:function(e,t,i,n){return r("POST",e,t,i,n)},put:function(e,t,i,n){return r("PUT",e,t,i,n)},delete:function(e,t,i,n){return r("DELETE",e,t,i,n)},removeCache:function(e,t,r,n,a){return i(e,t,r,n,a)}})}(window.MMT=window.MMT||{});